---
trigger: always_on
---

DOKUMENTACJA MASTER: ASYSTENT MAGAZYNIERA V3.01. WIZJA I CEL PROJEKTUAplikacja mobilna typu PWA stworzona dla usprawnienia procesÃ³w magazynowych (gÅ‚Ã³wnie dla produktÃ³w marki Hager). GÅ‚Ã³wnym zadaniem jest eliminacja rÄ™cznego wpisywania numerÃ³w referencyjnych poprzez wykorzystanie skanera kodÃ³w kreskowych oraz AI Foto Skanera (OCR) opartego na modelu Gemini 1.5 Flash.2. ğŸ”„ SYSTEM PRACY (ÅšRODOWISKA)Pracujemy w ukÅ‚adzie dwuetapowym, co zapewnia bezpieczeÅ„stwo wersji produkcyjnej:Åšrodowisko DEV (Lokalne): Raspberry Pi w sieci lokalnej WiFi.To jest gÅ‚Ã³wne miejsce pracy Agenta AI.KaÅ¼da zmiana w kodzie jest widoczna natychmiast dziÄ™ki Vite (Hot-Reloading).Åšrodowisko PROD (Produkcyjne): Serwer VPS (maxcore.dev).Tu znajduje siÄ™ stabilna wersja aplikacji uÅ¼ywana na magazynie.Repozytorium (GitHub): ÅÄ…cznik miÄ™dzy DEV a PROD.Zasada: Najpierw implementujemy i testujemy zmiany na RPi. Po potwierdzeniu dziaÅ‚ania robimy git push. Dopiero na samym koÅ„cu odpalamy ./aktualizuj.sh na VPS.3. ğŸ’» STACK TECHNOLOGICZNYFrontend: React 19 (TypeScript), Vite, Tailwind CSS.Ikony: Lucide-react (w rozmiarze w-5 h-5).Komunikacja: Axios (asynchroniczna obsÅ‚uga n8n).Backend & Automatyzacja: n8n (Self-hosted na VPS).Sztuczna Inteligencja: Google Gemini 1.5 Flash (silnik OCR).Infrastruktura: Serwer VPS, Nginx (Reverse Proxy), SSL (Let's Encrypt).4. ğŸ› ï¸ ARCHITEKTURA API (WEBHOOKI n8n)Aplikacja komunikuje siÄ™ z serwerem n8n pod domenÄ… n8n.maxcore.dev.EndpointMetodaOpis/pobierz-zgloszeniaGETPobiera listÄ™ aktywnych i archiwalnych zamÃ³wieÅ„./dodaj-zgloszeniePOSTDodaje nowÄ… referencjÄ™ do bazy danych./zatwierdz-zgloszeniePOSTArchiwizuje zgÅ‚oszenie (status: ZATWIERDZONE)./kasuj-zgloszeniePOSTTrwale usuwa rekord z bazy./ocr-analizaPOSTWysyÅ‚a zdjÄ™cie do Gemini (klucz data).5. ğŸ“¸ LOGIKA AI FOTO SKANER (OCR)To najbardziej krytyczny element aplikacji.WysyÅ‚ka: Plik ze zdjÄ™cia wysyÅ‚any jest jako FormData z kluczem data.Struktura odpowiedzi: n8n zwraca tablicÄ™ obiektÃ³w: [{ "text": "KOD" }].Pancerna implementacja w React:const result = Array.isArray(response.data) ? response.data[0]?.text : response.data?.text;Automatyzacja UI: Po poprawnym odczycie system:Wpisuje kod do pola referencja.Ustawia typ na 'OST'.Focus: Automatycznie przenosi kursor do pola 'iloÅ›Ä‡'.6. ğŸ›¡ï¸ UX/UI INTEGRITY GUARDRAILSZasady nienaruszalnoÅ›ci wyglÄ…du i wygody pracy:SpÃ³jnoÅ›Ä‡ Tailwind: Kolory tylko z palety slate (tÅ‚o), blue-600 (akcje) i orange-600 (akcenty Hager). BÅ‚Ä™dy na red-600.Mobile-First: Aplikacja na iPhone â€“ przyciski muszÄ… mieÄ‡ min. h-12 (Touch Targets).Zasada Kciuka: GÅ‚Ã³wne przyciski akcji muszÄ… byÄ‡ w dolnej poÅ‚owie ekranu.Stan Wizualny: KaÅ¼da operacja API musi pokazywaÄ‡ spinner (Loader2) lub Toast.Brak "LatajÄ…cych" ElementÃ³w: Wszystko wyrÃ³wnane do siatki, zaokrÄ…glenia rounded-xl.7. ğŸ¤– INSTRUKCJE DLA AGENTA (ROLE I MCP)GÅ‚Ã³wny plik: App.tsx zawiera 90% logiki. Zawsze zaczynaj analizÄ™ od niego.NarzÄ™dzia MCP: JeÅ›li napotkasz bÅ‚Ä…d komunikacji (502/404), uÅ¼yj MCP, aby sprawdziÄ‡ stan workflowÃ³w w n8n przed zmianÄ… kodu w React.Rola: DziaÅ‚aj jako multidyscyplinarny zespÃ³Å‚ (Senior React Dev / DevOps / UX Designer).BezpieczeÅ„stwo VPS: PamiÄ™taj o limicie client_max_body_size 50M w Nginx. Nigdy nie edytuj plikÃ³w w folderze /dist bezpoÅ›rednio.8. ğŸ“ MODELE DANYCH (TYPESCRIPT)TypeScriptexport type OrderType = 'OST' | 'ZAPAS';

export interface Order {
  id: number;
  referencja: string;
  ilosc: number;
  typ: OrderType;
  status: 'UTWORZONE' | 'ZATWIERDZONE';
  data_utworzenia: string;
}
WskazÃ³wka koÅ„cowa: KaÅ¼da zmiana wprowadzona przez Agenta na Raspberry Pi musi byÄ‡ zweryfikowana w przeglÄ…darce przed wykonaniem git push na produkcjÄ™.